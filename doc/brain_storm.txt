Research Proposal & Engineering RequirementsProject Title: BuildingFM: A Physics-Informed Universal Foundation Model for HVAC Lifecyle Tasks via Heterogeneous Masked Pre-training1. 核心叙事逻辑 (The Research Narrative)“One Model, Many Masks, Universal Physics”现状痛点: 建筑能源领域数据稀缺、系统异构（Heterogeneity）。传统模型（LSTM/Transformer）和迁移学习（Transfer Learning）依赖固定的输入/输出拓扑，无法在不同配置的建筑（如 Chiller vs. Heat Pump）之间有效迁移物理知识。解决方案: 构建一个基于 Moirai (Uni2TS) 架构的领域基座模型。核心机制:Super Schema (全集图谱): 定义一个包含 HVAC 领域所有可能变量（ID 0-50）的统一语义空间。Physics-Informed Pre-training (物理增强预训练): 利用海量合成数据（EnergyPlus），通过 Masked Modeling 强迫模型学习变量间的联合概率分布 $P(V_{all} | Context)$，即“物理方程组”。Task Unification (任务统一): 通过改变 Inference 阶段的 Masking 策略，用同一个模型解决 Forecasting, FDD, Virtual Sensing, 和 MPC 问题。2. 工程实施需求 (Engineering Requirements)Phase 1: 数据工程 (Data Pipeline)目标: 构建“高保真合成数据”与“稀疏真实数据”的混合流。Req 1.1: Global Variate Schema Definition (上帝视角字典)创建一个 JSON/YAML 映射表，锁定 ID 0-50 的物理含义。Example: {0: "Outdoor_Temp", 1: "Zone_Temp", ..., 50: "Chiller_Power"}关键约束: 无论数据源是 EnergyPlus 还是 Real Home，必须严格遵守此 ID 映射。Req 1.2: Synthetic Data Generation (Teacher Data)工具: EnergyPlus / Modelica。内容: 生成 Office (Chiller), Residential (HP), Commercial (VRF) 等多种模型。关键动作: 导出所有中间变量（COP, Flow Rate, Supply Temp），即使真实世界不测量。我们要用这些数据教模型“因果链条”。Req 1.3: Data Loading Strategy (The "All-in-Target" Trick)在 uni2ts 配置中，违背传统直觉，将所有变量（包括 Weather, Setpoints, Occupancy）全部定义为 target 1111。Reason: 只有在 target 里的变量才会被 Tokenize 并参与 Random Masking 训练。这是让模型学会“通过能耗反推天气”（物理一致性）的唯一途径。使用 feat_static_cat 注入系统类型信息（如 "System_Type_ID"），辅助 MoE (Mixture of Experts) 路由 2222。Phase 2: 模型训练与架构 (Model & Training)目标: 训练一个懂物理的通用 Encoder。Req 2.1: Configuration (基于 Moirai-Small/Base)使用 Any-variate Attention 机制处理不定长输入 3333。Patch Size: 建议设为适应 HVAC 动态的尺度（如 15min 或 30min window）。Req 2.2: Pre-training Strategy (Physics Injection)Input: 全量合成数据 (Dense Data)。Objective: Masked Auto-Encoding (MAE)。随机遮盖 15%-40% 的 Token，让模型重构。Hypothesis: Loss 的下降代表模型学会了热力学定律（例如：为了填补 Zone_Temp，必须理解 Outdoor_Temp 和 Power 的关系）。Req 2.3: Fine-tuning Strategy (Sim-to-Real Adaptation)Input: 混合少量真实数据 (Sparse Data)。真实数据中缺失的列填 NaN（或在 Dataset 构建时直接不包含该 ID）。目的: 让模型适应真实世界的噪声水平 (Noise Level) 和分布偏移 (Distribution Shift)。Phase 3: 下游任务推理 (Downstream Inference)目标: 通过 Prompting (Masking) 激活模型解决具体问题。Req 3.1: Task - FDD (故障诊断)Mode: Consistency Check。操作: 输入 [Outdoor, Zone_Temp, Setpoint]，人为 Mask 掉 Power。判定: 比较 Model_Reconstructed_Power vs Real_Power。如果残差超过阈值 -> 报警。Req 3.2: Task - Forecasting (预测)Mode: Causal Prediction。操作: 输入历史 Window，Mask 掉未来的 Power 和 Zone_Temp，保留未来的 Outdoor_Temp (作为已知条件)。Req 3.3: Task - Virtual Sensing (虚拟传感)Mode: Imputation。操作: 在真实建筑中，Mask 掉不存在的传感器位置（如 Chiller_Flow）。让模型输出该位置的推断值，作为“软传感器”读数。3. 论文验证计划 (Evaluation Plan for Paper)为了证明这不是“炒冷饭”，你需要设计以下对比实验：Baseline (传统 TL):使用 LSTM/Transformer。在 Source Domain (全量数据) 训练。在 Target Domain (稀疏数据) 测试。预期结果: 彻底失败，因为输入维度对不上，或者必须重新训练新的 Head。Ours (BuildingFM):使用上述 Pre-training 模型。直接 Zero-shot 或 Few-shot 应用于 Target Domain。预期结果: 即使缺少传感器，也能利用学到的物理逻辑保持较高的预测/诊断精度。Ablation Study (消融实验):证明 "All-in-Target" (把天气放进 target) 的 FDD 效果优于 "Weather as Covariate"。这将证明双向物理学习的重要性。